(()=>{"use strict";class t{constructor(){if(this.actionBtn=document.getElementById("actionBtn"),this.statusDiv=document.getElementById("status"),!this.actionBtn||!this.statusDiv)throw new Error("Required DOM elements not found");this.init()}init(){this.actionBtn.addEventListener("click",this.handleButtonClick.bind(this))}async handleButtonClick(){try{this.setButtonState(!0),this.hideStatus();const t=await chrome.tabs.query({active:!0,currentWindow:!0});if(!t[0]?.id)throw new Error("No active tab found");const s={action:"buttonClicked"},e=await chrome.tabs.sendMessage(t[0].id,s);if("success"!==e?.status)throw new Error(e?.message||"Unknown error occurred");this.showStatus("Action completed successfully!","success")}catch(t){console.error("Popup error:",t),this.showStatus(t instanceof Error?t.message:"An error occurred","error")}finally{this.setButtonState(!1)}}setButtonState(t){this.actionBtn.disabled=t,this.actionBtn.textContent=t?"Processing...":"Click me"}showStatus(t,s){this.statusDiv.textContent=t,this.statusDiv.className=`status ${s}`,this.statusDiv.style.display="block","success"===s&&setTimeout(()=>this.hideStatus(),3e3)}hideStatus(){this.statusDiv.style.display="none"}}document.addEventListener("DOMContentLoaded",()=>{try{new t}catch(t){console.error("Failed to initialize popup:",t)}})})();