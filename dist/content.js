(()=>{"use strict";class t{constructor(){if(t.instance)return t.instance;t.instance=this,this.init()}init(){this.setupMessageListener(),this.setupKeyboardListener(),this.log("Content script loaded")}setupMessageListener(){chrome.runtime.onMessage.addListener((t,e,n)=>(this.handleMessage(t,e,n),!0))}async handleMessage(t,e,n){try{if(this.log("Received message:",t),"buttonClicked"!==t.action)throw new Error(`Unknown action: ${t.action}`);await this.handleButtonClick(),n({status:"success",message:"Button click handled"})}catch(t){console.error("Content script error:",t),n({status:"error",message:t instanceof Error?t.message:"Unknown error"})}}async handleButtonClick(){this.log("Button clicked in popup"),this.addVisualIndicator()}addVisualIndicator(){const t=document.getElementById("unmute-indicator");t&&t.remove();const e=document.createElement("div");e.id="unmute-indicator",e.textContent="Unmute Extension Active!",e.style.cssText="\n      position: fixed;\n      top: 20px;\n      right: 20px;\n      background: #1a73e8;\n      color: white;\n      padding: 12px 16px;\n      border-radius: 6px;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n      font-size: 14px;\n      font-weight: 500;\n      z-index: 10000;\n      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);\n      transition: opacity 0.3s ease;\n    ",document.body.appendChild(e),setTimeout(()=>{e.style.opacity="0",setTimeout(()=>e.remove(),300)},3e3)}setupKeyboardListener(){document.addEventListener("keydown",t=>{const e=t.metaKey||t.ctrlKey,n=t.shiftKey,s="Space"===t.code;e&&n&&s&&this.printTracking()})}async printTracking(){this.log("tracking");try{const t=(await chrome.storage.local.get(["trackingStats"])).trackingStats||{totalCount:0,lastPress:"Never"},e=(new Date).toLocaleTimeString(),n={totalCount:t.totalCount+1,lastPress:e};await chrome.storage.local.set({trackingStats:n});try{await chrome.runtime.sendMessage({action:"trackingUpdate"})}catch(t){}try{await chrome.runtime.sendMessage({action:"sendSlackMessage"})}catch(t){console.error("Error requesting Slack message:",t)}}catch(t){console.error("Error updating tracking stats:",t)}}log(t,...e){console.log(`[Unmute Content Script] ${t}`,...e)}}new t})();